(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["movie"],{"5d81":function(e,t,s){"use strict";s.r(t);var r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"movies-search section"},[s("section",{staticClass:"container is-fluid"},[s("section",{staticClass:"filter-section"},[s("div",{staticClass:"\n        filter-section__inner field\n        is-grouped is-grouped-multiline"},[s("h2",{staticClass:"\n          control title is-4\n          has-text-white-ter\n          has-text-weight-bold"},[e._v("Selected genres: ")]),e.genresToSearch.length?e._l(e.genresToSearch,function(t){return s("div",{key:t.id,staticClass:"control"},[s("span",{staticClass:"tag is-warning is-small"},[e._v("\n              "+e._s(t.name)+"\n              "),s("button",{staticClass:"delete is-small",on:{click:function(s){e.removeGenreFromSearch(t)}}})])])}):s("div",{staticClass:"control"},[s("span",{staticClass:"tag is-warning is-small"},[e._v("All")])]),e.sortBy?[e.sortBy?s("h2",{staticClass:"\n            control title is-4\n            has-text-white-ter\n            has-text-weight-bold"},[e._v("Sorted by: ")]):e._e(),[s("div",{staticClass:"control"},[s("span",{staticClass:"tag is-warning is-small"},[e._v("\n                "+e._s(e.sortBy)+"\n              ")])])]]:e._e()],2)]),s("movies",{attrs:{results:e.filteredMovies,title:"Your search results:",page:e.page,"total-pages":e.totalPages,loading:e.loading,"pagination-route-name":"movies-search"}})],1)])},n=[],i=s("be94"),a=(s("0082"),s("3835")),o=(s("3a00"),s("2c4b"),s("6673"),s("96cf"),s("1da1")),c=(s("35df"),s("1712")),l=s("2f62"),u=s("da27"),g=Object(l["b"])("movies",["getGenre"]),h=g.getGenre,d={components:{Movies:u["a"]},name:"searched-movies",props:{page:{type:Number,default:1},genresIds:{type:Array,required:!1},sortBy:{type:String,required:!1}},data:function(){return{filteredMovies:[],loading:!1,totalPages:Number.POSITIVE_INFINITY,error:null}},computed:{getGenre:h,genresToSearch:function(){return this.genresIds.map(this.getGenre).filter(Boolean)}},watch:{page:function(){this.getMoviesListForCurrentPageAndFilters()},genresIds:function(){this.getMoviesListForCurrentPageAndFilters()}},created:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this.$store.dispatch("movies/getMoviesGenres"),this.getMoviesListForCurrentPageAndFilters()]);case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),methods:{getMoviesListForCurrentPageAndFilters:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",this.getMoviesList({page:this.page,with_genres:this.genresIds.toString(),sort_by:this.sortBy}));case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),getMoviesList:function(){var e=Object(o["a"])(regeneratorRuntime.mark(function e(t){var s,r,n,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,e.next=3,Object(c["a"])(this.$store.dispatch("movies/getMoviesWithFiltering",t));case 3:s=e.sent,r=Object(a["a"])(s,2),n=r[0],i=r[1],this.loading=!1,this.error=n,i&&(this.totalPages=i.total_pages,this.filteredMovies=i.results);case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),removeGenreFromSearch:function(e){var t=this.$route,s=this.genresIds.filter(function(t){return t!==e.id});this.$router.push({name:t.name,query:Object(i["a"])({},t.query,{page:"1",with_genres:String(s)})})}}},p=d,v=(s("fe39"),s("2877")),f=Object(v["a"])(p,r,n,!1,null,null,null);f.options.__file="SearchedMovies.vue";t["default"]=f.exports},6203:function(e,t,s){},fe39:function(e,t,s){"use strict";var r=s("6203"),n=s.n(r);n.a}}]);
//# sourceMappingURL=movie.e1ee9e2c.js.map