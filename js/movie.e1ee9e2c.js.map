{"version":3,"sources":["webpack:///./src/views/SearchedMovies.vue?4313","webpack:///src/views/SearchedMovies.vue","webpack:///./src/views/SearchedMovies.vue?21d5","webpack:///./src/views/SearchedMovies.vue","webpack:///./src/views/SearchedMovies.vue?0259"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_v","genresToSearch","_l","genre","key","id","_s","name","on","click","$event","removeGenreFromSearch","_e","sortBy","attrs","results","filteredMovies","title","page","total-pages","totalPages","loading","pagination-route-name","staticRenderFns","Object","vuex_esm","getGenre","SearchedMoviesvue_type_script_lang_js_","components","Movies","props","type","Number","default","genresIds","Array","required","String","data","POSITIVE_INFINITY","error","computed","map","filter","Boolean","watch","getMoviesListForCurrentPageAndFilters","created","_created","asyncToGenerator","regeneratorRuntime","mark","_callee","wrap","_context","prev","next","Promise","all","$store","dispatch","stop","apply","arguments","methods","_getMoviesListForCurrentPageAndFilters","_callee2","_context2","abrupt","getMoviesList","with_genres","toString","sort_by","_getMoviesList","_callee3","params","_ref","_ref2","_context3","await_to_js_es5","sent","slicedToArray","total_pages","_x","route","$route","$router","push","query","objectSpread","views_SearchedMoviesvue_type_script_lang_js_","component","componentNormalizer","options","__file","__webpack_exports__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_SearchedMovies_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_6_oneOf_1_0_node_modules_css_loader_index_js_ref_6_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_6_oneOf_1_2_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_SearchedMovies_vue_vue_type_style_index_0_lang_css___WEBPACK_IMPORTED_MODULE_0___default","n"],"mappings":"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","file":"js/movie.e1ee9e2c.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"movies-search section\"},[_c('section',{staticClass:\"container is-fluid\"},[_c('section',{staticClass:\"filter-section\"},[_c('div',{staticClass:\"\\n        filter-section__inner field\\n        is-grouped is-grouped-multiline\"},[_c('h2',{staticClass:\"\\n          control title is-4\\n          has-text-white-ter\\n          has-text-weight-bold\"},[_vm._v(\"Selected genres: \")]),(_vm.genresToSearch.length)?_vm._l((_vm.genresToSearch),function(genre){return _c('div',{key:genre.id,staticClass:\"control\"},[_c('span',{staticClass:\"tag is-warning is-small\"},[_vm._v(\"\\n              \"+_vm._s(genre.name)+\"\\n              \"),_c('button',{staticClass:\"delete is-small\",on:{\"click\":function($event){_vm.removeGenreFromSearch(genre)}}})])])}):_c('div',{staticClass:\"control\"},[_c('span',{staticClass:\"tag is-warning is-small\"},[_vm._v(\"All\")])]),(_vm.sortBy)?[(_vm.sortBy)?_c('h2',{staticClass:\"\\n            control title is-4\\n            has-text-white-ter\\n            has-text-weight-bold\"},[_vm._v(\"Sorted by: \")]):_vm._e(),[_c('div',{staticClass:\"control\"},[_c('span',{staticClass:\"tag is-warning is-small\"},[_vm._v(\"\\n                \"+_vm._s(_vm.sortBy)+\"\\n              \")])])]]:_vm._e()],2)]),_c('movies',{attrs:{\"results\":_vm.filteredMovies,\"title\":\"Your search results:\",\"page\":_vm.page,\"total-pages\":_vm.totalPages,\"loading\":_vm.loading,\"pagination-route-name\":\"movies-search\"}})],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"movies-search section\">\n    <section class=\"container is-fluid\">\n      <section class=\"filter-section\">\n        <div class=\"\n          filter-section__inner field\n          is-grouped is-grouped-multiline\"\n        >\n          <h2 class=\"\n            control title is-4\n            has-text-white-ter\n            has-text-weight-bold\"\n          >Selected genres: </h2>\n\n          <template v-if=\"genresToSearch.length\">\n            <div\n              class=\"control\"\n              v-for=\"genre in genresToSearch\"\n              :key=\"genre.id\"\n            >\n              <span class=\"tag is-warning is-small\">\n                {{ genre.name }}\n                <button\n                  class=\"delete is-small\"\n                  @click=\"removeGenreFromSearch(genre)\"\n                />\n              </span>\n            </div>\n          </template>\n          <div v-else class=\"control\">\n            <span class=\"tag is-warning is-small\">All</span>\n          </div>\n          <template v-if=\"sortBy\">\n\n            <h2 v-if=\"sortBy\" class=\"\n              control title is-4\n              has-text-white-ter\n              has-text-weight-bold\"\n            >Sorted by: </h2>\n            <template>\n              <div class=\"control\">\n                <span class=\"tag is-warning is-small\">\n                  {{ sortBy }}\n                </span>\n              </div>\n            </template>\n          </template>\n        </div>\n      </section>\n\n        <movies\n        :results=\"filteredMovies\"\n        title=\"Your search results:\"\n        :page=\"page\"\n        :total-pages=\"totalPages\"\n        :loading=\"loading\"\n        pagination-route-name=\"movies-search\"\n        >\n        </movies>\n\n    </section>\n  </div>\n</template>\n\n<script>\nimport to from 'await-to-js';\nimport { mapGetters } from 'vuex'\nimport Movies from './Movies'\n\nconst { getGenre } = mapGetters('movies',['getGenre'])\n\nexport default {\n  components: {\n    Movies\n  },\n  name: 'searched-movies',\n  props: {\n    page: {\n      type: Number,\n      default: 1\n    },\n    genresIds: {\n      type: Array,\n      required: false\n    },\n    sortBy: {\n      type: String,\n      required: false\n    }\n  },\n  data () {\n    return {\n      filteredMovies: [],\n      loading: false,\n      totalPages: Number.POSITIVE_INFINITY,\n      error: null\n    }\n  },\n  computed: {\n    getGenre,\n    genresToSearch () {\n      return this.genresIds\n        .map(this.getGenre)\n        .filter(Boolean)\n    },\n  },\n  watch: {\n    page () {\n      this.getMoviesListForCurrentPageAndFilters()\n    },\n    genresIds () {\n      this.getMoviesListForCurrentPageAndFilters()\n    }\n  },\n  async created () {\n    await Promise.all([\n      this.$store.dispatch('movies/getMoviesGenres'),\n      this.getMoviesListForCurrentPageAndFilters()\n    ])\n  },\n  methods: {\n    async getMoviesListForCurrentPageAndFilters () {\n      return this.getMoviesList({\n        page: this.page,\n        with_genres: this.genresIds.toString(),\n        sort_by: this.sortBy\n      })\n    },\n    async getMoviesList (params) {\n      this.loading = true\n      let [error, results] = await to(this.$store.dispatch('movies/getMoviesWithFiltering', params))\n      this.loading = false\n      this.error = error\n      if (results) {\n        this.totalPages = results.total_pages\n        this.filteredMovies = results.results\n      }\n    },\n    removeGenreFromSearch (genre) {\n      let route = this.$route\n      let genresIds = this.genresIds.filter(id => id !== genre.id)\n      this.$router.push({\n        name: route.name,\n        query: {\n          ...route.query,\n          page: '1',\n          with_genres: String(genresIds)\n        }\n      })\n    }\n  }\n}\n</script>\n\n<style>\n\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SearchedMovies.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SearchedMovies.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./SearchedMovies.vue?vue&type=template&id=46927aaf&\"\nimport script from \"./SearchedMovies.vue?vue&type=script&lang=js&\"\nexport * from \"./SearchedMovies.vue?vue&type=script&lang=js&\"\nimport style0 from \"./SearchedMovies.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\ncomponent.options.__file = \"SearchedMovies.vue\"\nexport default component.exports","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SearchedMovies.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SearchedMovies.vue?vue&type=style&index=0&lang=css&\""],"sourceRoot":""}